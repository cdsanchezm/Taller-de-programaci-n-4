<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://estebancardenas14.github.io/ProgrammingWorkshop-2.github.io/img/logo.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Taller N.4 </title>
    <link rel="stylesheet" href="CSS/index.css">

</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="height: 80px;">
        <a class="navbar-brand " href="index.html">
            <img width="120px" height="100px" src="https://estebancardenas14.github.io/ProgrammingWorkshop-2.github.io/img/logo.svg" alt="logoPets" style="margin-left: 150px;" />
        </a>
        <a><img width="70px" alt="" src=""></a>
    </nav>


    <div class="container">
        <div id="biblioteca">
            <hr style="color: white; height: 3px;">
            <h4 style="color: azure;" class="text-center">Biblioteca de imagenes</h4>
            <hr style="color: white; height: 3px;">
        </div>
    </div>


    <div class="container" id="bibliotecaImg">

        <div class="row" id="IngresarFoto">


        </div>

    </div>

    <script>
        function readTextFile(file, callback) {
            var rawFile = new XMLHttpRequest();
            rawFile.overrideMimeType("application/json");
            rawFile.open("GET", file, true);
            rawFile.onreadystatechange = function() {
                if (rawFile.readyState === 4 && rawFile.status == "200") {
                    callback(rawFile.responseText);
                }
            }
            rawFile.send(null);
        }


        readTextFile("/target/taller-4-1.0-SNAPSHOT/upload/Data.json", function(text) {
            var data = JSON.parse(text);
            console.log(data[0].description);

            var size = data.length;

            console.log(size);

            crearCards(data, size);

        });


        function crearCards(data, size) {

            for (i = 0; i < size; i++) {

                let contenedor = document.getElementById('IngresarFoto');

                let col = document.createElement('div');
                let div = document.createElement('div');
                let description = document.createElement('p');
                let date = document.createElement('h6');
                let image = document.createElement('img');

                let tagName = document.createElement('a');

                let button = document.createElement('button');

                div.className = 'cardImage';
                col.className = 'col';
                button.className = 'btn btn-warning';
                button.innerHTML = 'Descargar'
                button.id = 'btnDescarga';
                tagName.download = data[i].image;
                tagName.href = data[i].image;


                description.innerHTML = data[i].description;
                image.src = data[i].image;
                date.innerHTML = data[i].fecha;

                tagName.appendChild(button);
                div.appendChild(image);
                div.appendChild(description);
                div.appendChild(date);
                div.appendChild(tagName);
                col.appendChild(div);
                contenedor.appendChild(col);

            }

        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js " integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf " crossorigin="anonymous "></script>

</body>

</html>